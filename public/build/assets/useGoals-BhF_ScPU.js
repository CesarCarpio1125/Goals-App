import{u as f,q as h,k as s,m as n}from"./app-DO8EwTB7.js";function _(){const t=n([]),r=n(!1),l=n(null),o=f({title:"",description:"",target_value:100,current_value:0,deadline:null}),i=s(()=>t.value.length>0),u=s(()=>t.value.filter(e=>e.status==="completed")),g=s(()=>t.value.filter(e=>e.status==="in_progress")),d=s(()=>t.value.filter(e=>e.status==="pending")),v=s(()=>t.value.length===0?0:Math.round(u.value.length/t.value.length*100));return{goals:t,loading:r,error:l,form:o,hasGoals:i,completedGoals:u,inProgressGoals:g,pendingGoals:d,completionRate:v,createGoal:async e=>{r.value=!0,l.value=null;try{const a=await o.post(route("goals.store"),e);return o.reset(),a}catch(a){throw l.value="Failed to create goal",console.error("Error creating goal:",a),a}finally{r.value=!1}},updateGoal:async(e,a)=>{r.value=!0,l.value=null;try{await o.patch(route("goals.update",e),a)}catch(c){throw l.value="Failed to update goal",console.error("Error updating goal:",c),c}finally{r.value=!1}},deleteGoal:async e=>{if(confirm("Are you sure you want to delete this goal?")){r.value=!0,l.value=null;try{await o.delete(route("goals.destroy",e))}catch(a){throw l.value="Failed to delete goal",console.error("Error deleting goal:",a),a}finally{r.value=!1}}},refreshGoals:async()=>{r.value=!0,l.value=null;try{await h.reload({only:["goals"]})}catch(e){throw l.value="Failed to refresh goals",console.error("Error refreshing goals:",e),e}finally{r.value=!1}},resetForm:()=>{o.reset(),l.value=null},clearError:()=>{l.value=null}}}export{_ as u};
