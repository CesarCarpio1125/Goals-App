import{k as p,m as k,g as u,a as A,b as s,h as U,w as P,d as e,o as c,f as w,t as d,i as j,l as $,F as D,q as E,p as q,j as K,A as G,B as X,y as I,n as L,s as z,x as J}from"./app-CpeMjnII.js";import{_ as Q}from"./AuthenticatedLayout-DYUZiCL3.js";function W(o){const l=p(()=>{const r=o.value?.length||0;if(r===0)return 0;const m=o.value?.filter(y=>y.completed).length||0;return Math.round(m/r*100)}),i=p(()=>{const r=o.value?.length||0,m=o.value?.filter(C=>C.completed).length||0,y=r-m;return{total:r,completed:m,pending:y,percentage:r>0?Math.round(m/r*100):0}}),v=p(()=>o.value?.filter(r=>r.completed).length||0),f=p(()=>o.value?.length||0),g=p(()=>f.value-v.value);return{progressPercentage:l,taskProgress:i,completedTasks:v,totalTasks:f,pendingTasks:g}}function Y(o,l=[]){const i=k(l),v=k(""),f=k(!1),g=k(!1),r=k(""),m=k([]),y=k(!1);return{tasks:i,newTaskTitle:v,isAddingTask:f,isLoading:g,motivationalMessage:r,recommendations:m,showFeedback:y,addTask:async()=>{if(v.value.trim()){g.value=!0;try{const a=await fetch(route("goals.tasks.store",o),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({title:v.value,description:"",order:i.value.length})});if(a.ok){const x=await a.json();i.value.push(x),v.value="",f.value=!1}}catch(a){console.error("Error adding task:",a)}finally{g.value=!1}}},toggleTask:async a=>{if(console.log("toggleTask called with:",{task:a,goalId:o,taskId:a?.id}),!a||!a.id){console.error("Task or task.id is missing:",a);return}if(!o){console.error("Goal ID is missing:",o);return}try{const x=route("goals.tasks.toggle",{goal:o,task:a.id});console.log("Generated route URL:",x);const h=await fetch(x,{method:"PATCH",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}});if(h.ok){const b=await h.json(),S=i.value.findIndex(T=>T.id===a.id);if(S!==-1){const T=[...i.value];T[S]={...b.task},i.value=T}r.value=b.goal.motivational_message,m.value=b.goal.recommendations,y.value=!0,typeof window<"u"&&window.sessionStorage&&sessionStorage.setItem("goal_updated","true"),setTimeout(()=>{y.value=!1},5e3)}}catch(x){console.error("Error toggling task:",x)}},deleteTask:async a=>{if(confirm("Are you sure you want to delete this task?"))try{(await fetch(route("goals.tasks.destroy",{goal:o,task:a.id}),{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}})).ok&&(i.value=i.value.filter(h=>h.id!==a.id))}catch(x){console.error("Error deleting task:",x)}}}}const Z={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 py-12"},ee={class:"mb-8"},te={key:0,class:"mb-4 bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-lg"},se={class:"flex items-center"},oe={class:"flex items-center justify-between mb-4"},le={class:"flex items-center space-x-4"},ne={class:"text-3xl font-bold text-gray-900"},re={class:"mt-2 text-gray-600"},ae={key:0,class:"mb-6 animate-fade-in"},de={class:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4"},ie={class:"flex"},ue={class:"ml-3 flex-1"},ce={class:"text-sm font-medium text-blue-800"},ge={key:0,class:"mt-2 text-sm text-blue-700"},me={class:"list-disc list-inside mt-1 space-y-1"},xe={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},ve={class:"lg:col-span-2 space-y-8"},pe={class:"bg-white shadow overflow-hidden sm:rounded-lg"},fe={class:"border-t border-gray-200 px-4 py-5 sm:p-6"},ye={class:"space-y-6"},he={class:"flex justify-between text-sm font-medium text-gray-900 mb-2"},be={class:"w-full bg-gray-200 rounded-full h-3"},ke={class:"flex justify-between text-sm text-gray-500 mt-2"},we={class:"grid grid-cols-3 gap-4"},Te={class:"text-center p-4 bg-gray-50 rounded-lg"},_e={class:"text-2xl font-bold text-blue-600"},Ce={class:"text-center p-4 bg-green-50 rounded-lg"},Me={class:"text-2xl font-bold text-green-600"},je={class:"text-center p-4 bg-yellow-50 rounded-lg"},Se={class:"text-2xl font-bold text-yellow-600"},Ae={class:"bg-white shadow overflow-hidden sm:rounded-lg"},De={class:"px-4 py-5 sm:px-6"},Be={class:"flex justify-between items-center"},Pe={key:0,class:"border-t border-gray-200 px-4 py-4 sm:px-6 bg-gray-50"},Ee={class:"flex space-x-3"},Ge=["disabled"],Le={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},ze={class:"border-t border-gray-200"},Ne={key:0,class:"px-4 py-8 text-center text-gray-500"},He={key:1,class:"divide-y divide-gray-200"},Oe={class:"flex items-center"},Ve=["checked","onChange"],Fe=["onClick"],Re={class:"space-y-6"},Ue={class:"bg-white shadow overflow-hidden sm:rounded-lg"},$e={class:"border-t border-gray-200 px-4 py-5 sm:p-6 space-y-4"},qe={class:"mt-1"},Ke={class:"mt-1 text-sm text-gray-900"},Xe={class:"mt-1 text-sm text-gray-900"},Ie={class:"mt-1 text-sm text-gray-900"},Je={class:"mt-1 text-sm text-gray-900"},Ye={__name:"Show",props:{goal:{type:Object,required:!0}},setup(o){const l=o,i=J(),v=p(()=>i.props.flash||{}),{tasks:f,newTaskTitle:g,isAddingTask:r,isLoading:m,motivationalMessage:y,recommendations:C,showFeedback:B,addTask:M,toggleTask:a,deleteTask:x}=Y(l.goal.id,l.goal.tasks||[]),{progressPercentage:h,taskProgress:b}=W(f),S=p(()=>h.value>=100?"bg-green-100 text-green-800":l.goal.deadline&&new Date(l.goal.deadline)<new Date?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"),T=p(()=>h.value>=100?"Completed":l.goal.deadline&&new Date(l.goal.deadline)<new Date?"Overdue":"In Progress"),N=p(()=>l.goal.deadline?new Date(l.goal.deadline).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"No deadline"),H=p(()=>new Date(l.goal.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),O=()=>{z.visit(route("goals.edit",l.goal.id))},V=()=>{confirm("Are you sure you want to delete this goal? This action cannot be undone.")&&z.delete(route("goals.destroy",l.goal.id))},F=()=>{const _=window.location.origin+route("goals.show",l.goal.id);navigator.share?navigator.share({title:l.goal.title,text:l.goal.description,url:_}):(navigator.clipboard.writeText(_),alert("Goal link copied to clipboard!"))};return(_,t)=>(c(),u(D,null,[A(s(U),{title:o.goal.title},null,8,["title"]),A(Q,null,{default:P(()=>[e("div",Z,[e("div",ee,[v.value.success?(c(),u("div",te,[e("div",se,[t[6]||(t[6]=e("svg",{class:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),w(" "+d(v.value.success),1)])])):j("",!0),e("div",oe,[e("div",le,[A(s($),{href:_.route("goals.index"),class:"text-blue-600 hover:text-blue-800 flex items-center"},{default:P(()=>[...t[7]||(t[7]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),w(" Back to Goals ",-1)])]),_:1},8,["href"])]),e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:O,class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},[...t[8]||(t[8]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),w(" Edit Goal ",-1)])])])]),e("h1",ne,d(o.goal.title),1),e("p",re,d(o.goal.description),1)]),s(B)?(c(),u("div",ae,[e("div",de,[e("div",ie,[t[10]||(t[10]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})])],-1)),e("div",ue,[e("h3",ce,d(s(y)),1),s(C).length>0?(c(),u("div",ge,[t[9]||(t[9]=e("p",{class:"font-medium"},"Recomendaciones:",-1)),e("ul",me,[(c(!0),u(D,null,E(s(C),n=>(c(),u("li",{key:n},d(n),1))),128))])])):j("",!0)])])])])):j("",!0),e("div",xe,[e("div",ve,[e("div",pe,[t[15]||(t[15]=e("div",{class:"px-4 py-5 sm:px-6"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Progress Overview"),e("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"},"Your progress is automatically calculated based on completed tasks")],-1)),e("div",fe,[e("div",ye,[e("div",null,[e("div",he,[t[11]||(t[11]=e("span",null,"Overall Progress",-1)),e("span",null,d(s(h))+"%",1)]),e("div",be,[e("div",{class:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:q({width:s(h)+"%"})},null,4)]),e("div",ke,[e("span",null,d(s(b).completed)+" tasks completed",1),e("span",null,d(s(b).total)+" total tasks",1)])]),e("div",we,[e("div",Te,[e("div",_e,d(s(b).total),1),t[12]||(t[12]=e("div",{class:"text-sm text-gray-600"},"Total Tasks",-1))]),e("div",Ce,[e("div",Me,d(s(b).completed),1),t[13]||(t[13]=e("div",{class:"text-sm text-gray-600"},"Completed",-1))]),e("div",je,[e("div",Se,d(s(b).pending),1),t[14]||(t[14]=e("div",{class:"text-sm text-gray-600"},"Pending",-1))])])])])]),e("div",Ae,[e("div",De,[e("div",Be,[t[17]||(t[17]=e("div",null,[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Tasks"),e("p",{class:"mt-1 max-w-2xl text-sm text-gray-500"},"Break down your goal into smaller tasks")],-1)),e("button",{onClick:t[0]||(t[0]=n=>r.value=!0),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700"},[...t[16]||(t[16]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),w(" Add Task ",-1)])])])]),s(r)?(c(),u("div",Pe,[e("div",Ee,[K(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>X(g)?g.value=n:null),onKeyup:[t[2]||(t[2]=G((...n)=>s(M)&&s(M)(...n),["enter"])),t[3]||(t[3]=G(n=>r.value=!1,["escape"]))],type:"text",placeholder:"What needs to be done?",class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",ref:"newTaskInput"},null,544),[[I,s(g)]]),e("button",{onClick:t[4]||(t[4]=(...n)=>s(M)&&s(M)(...n)),disabled:!s(g).trim()||s(m),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50"},[s(m)?(c(),u("svg",Le,[...t[18]||(t[18]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):j("",!0),t[19]||(t[19]=w(" Add ",-1))],8,Ge),e("button",{onClick:t[5]||(t[5]=n=>{r.value=!1,g.value=""}),class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"}," Cancel ")])])):j("",!0),e("div",ze,[s(f).length===0?(c(),u("div",Ne,[...t[20]||(t[20]=[e("svg",{class:"w-12 h-12 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),e("p",null,"No tasks yet. Add your first task to get started!",-1)])])):(c(),u("ul",He,[(c(!0),u(D,null,E(s(f),n=>(c(),u("li",{key:n.id,class:"px-4 py-4 sm:px-6 hover:bg-gray-50"},[e("div",Oe,[e("input",{type:"checkbox",checked:n.completed,onChange:R=>s(a)(n),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,40,Ve),e("span",{class:L(["ml-3 flex-1",{"line-through text-gray-500":n.completed}])},d(n.title),3),e("button",{onClick:R=>s(x)(n.id),class:"ml-3 text-red-600 hover:text-red-800"},[...t[21]||(t[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Fe)])]))),128))]))])])]),e("div",Re,[e("div",Ue,[t[27]||(t[27]=e("div",{class:"px-4 py-5 sm:px-6"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Goal Details")],-1)),e("div",$e,[e("div",null,[t[22]||(t[22]=e("dt",{class:"text-sm font-medium text-gray-500"},"Status",-1)),e("dd",qe,[e("span",{class:L(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",S.value])},d(T.value),3)])]),e("div",null,[t[23]||(t[23]=e("dt",{class:"text-sm font-medium text-gray-500"},"Target",-1)),e("dd",Ke,d(o.goal.target_value),1)]),e("div",null,[t[24]||(t[24]=e("dt",{class:"text-sm font-medium text-gray-500"},"Current Progress",-1)),e("dd",Xe,d(o.goal.current_value||0),1)]),e("div",null,[t[25]||(t[25]=e("dt",{class:"text-sm font-medium text-gray-500"},"Deadline",-1)),e("dd",Ie,d(N.value),1)]),e("div",null,[t[26]||(t[26]=e("dt",{class:"text-sm font-medium text-gray-500"},"Created",-1)),e("dd",Je,d(H.value),1)])])]),e("div",{class:"bg-white shadow overflow-hidden sm:rounded-lg"},[t[30]||(t[30]=e("div",{class:"px-4 py-5 sm:px-6"},[e("h3",{class:"text-lg leading-6 font-medium text-gray-900"},"Quick Actions")],-1)),e("div",{class:"border-t border-gray-200 px-4 py-5 sm:p-6 space-y-3"},[e("button",{onClick:F,class:"w-full inline-flex justify-center items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},[...t[28]||(t[28]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m9.032 4.026a9.001 9.001 0 01-7.432 0m9.032-4.026A9.001 9.001 0 0112 3c-4.474 0-8.268 3.12-9.032 7.326m0 0A9.001 9.001 0 0012 21c4.474 0 8.268-3.12 9.032-7.326"})],-1),w(" Share Goal ",-1)])]),e("button",{onClick:V,class:"w-full inline-flex justify-center items-center px-4 py-2 border border-red-300 text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50"},[...t[29]||(t[29]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),w(" Delete Goal ",-1)])])])])])])])]),_:1})],64))}};export{Ye as default};
