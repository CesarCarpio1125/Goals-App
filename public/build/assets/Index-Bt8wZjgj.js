import{y as j,g as a,a as v,b as n,h as B,w as b,d as e,l as _,f as C,q as x,o as i,i as h,n as y,t as g,F as G,p as N,x as T,s as E,m as M}from"./app-DO8EwTB7.js";import{_ as L}from"./AuthenticatedLayout-CKMOUawX.js";import{u as S}from"./useGoals-BhF_ScPU.js";function m(p){if(!p||!p.tasks)return{totalTasks:0,completedTasks:0,pendingTasks:0,progressPercentage:0,status:"pending"};const d=p.tasks.length,s=p.tasks.filter(f=>f.completed).length,u=d-s,c=d>0?Math.round(s/d*100):0;let l;return d===0?l="pending":s===d?l="completed":s>0?l="in_progress":l="pending",{totalTasks:d,completedTasks:s,pendingTasks:u,progressPercentage:c,status:l}}const F={class:"mx-auto max-w-7xl sm:px-6 lg:px-8 py-12"},H={class:"mb-8 flex justify-between items-center"},P={class:"flex space-x-3"},D=["disabled"],V={key:0,class:"absolute inset-0 bg-blue-700 opacity-20 transition-opacity duration-200"},z={key:1,class:"absolute inset-0 flex items-center justify-center"},A={class:"flex items-center space-x-2 relative z-10"},I={class:"transition-colors duration-200"},U={key:2,class:"absolute -top-1 -right-1 w-2 h-2 bg-green-400 rounded-full animate-pulse"},$={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},O={class:"bg-white overflow-hidden shadow rounded-lg"},R={class:"p-5"},X={class:"flex items-center"},q={class:"ml-5 w-0 flex-1"},Y={class:"text-lg font-medium text-gray-900"},J={class:"bg-white overflow-hidden shadow rounded-lg"},K={class:"p-5"},Q={class:"flex items-center"},W={class:"ml-5 w-0 flex-1"},Z={class:"text-lg font-medium text-gray-900"},ee={class:"bg-white overflow-hidden shadow rounded-lg"},te={class:"p-5"},se={class:"flex items-center"},oe={class:"ml-5 w-0 flex-1"},le={class:"text-lg font-medium text-gray-900"},ne={key:0,class:"bg-white shadow overflow-hidden sm:rounded-md"},re={class:"divide-y divide-gray-200"},ae={class:"px-4 py-4 sm:px-6"},ie={class:"flex items-center justify-between"},de={class:"flex-1"},ue={class:"text-lg font-medium text-gray-900 hover:text-blue-600 transition-colors"},ce={class:"mt-1 text-sm text-gray-500"},ge={class:"mt-2 flex items-center text-sm text-gray-500"},me={class:"ml-4 flex-1 bg-gray-200 rounded-full h-2"},he={class:"ml-4 flex-shrink-0"},pe={key:1,class:"text-center py-12"},fe=["disabled"],ve={key:0,class:"absolute inset-0 bg-blue-700 opacity-20 transition-opacity duration-200"},xe={key:1,class:"absolute inset-0 flex items-center justify-center"},be={class:"flex items-center space-x-2 relative z-10"},ye={class:"transition-colors duration-200"},ke={key:2,class:"absolute -top-1 -right-1 w-2 h-2 bg-green-400 rounded-full animate-pulse"},Me={__name:"Index",setup(p){const d=E();S();const s=d.props.goals||[],u=d.props.stats||{};console.log("=== GOALS INDEX DEBUG ==="),console.log("Goals from props:",s),console.log("Goals length:",s.length),console.log("Stats from props:",u),console.log("Stats keys:",u?Object.keys(u):"No stats"),console.log("First goal tasks:",s[0]?.tasks),console.log("First goal tasks length:",s[0]?.tasks?.length),console.log("First goal completed tasks:",s[0]?.tasks?.filter(r=>r.completed)?.length),s.forEach((r,t)=>{const o=m(r);console.log(`Goal ${t+1} (${r.title}):`,o)});const c=M(!1),l=M(!1);j(()=>{const r=()=>{sessionStorage.getItem("goal_updated")==="true"&&(sessionStorage.removeItem("goal_updated"),x.reload({only:["goals","stats"]}))},t=()=>{document.visibilityState==="visible"&&r()};document.addEventListener("visibilitychange",t);const o=()=>{r()};return window.addEventListener("focus",o),r(),()=>{document.removeEventListener("visibilitychange",t),window.removeEventListener("focus",o)}});const f=()=>{c.value=!0,x.prefetch(route("goals.create"))},k=()=>{c.value=!1},w=()=>{l.value=!0,x.visit(route("goals.create"))};return console.log("=== GOALS INDEX DEBUG ==="),console.log("Page props:",d.props),console.log("Goals from props:",s),console.log("Goals length:",s.length),console.log("Goals array:",Array.isArray(s)?s:"Not an array"),console.log("Stats from props:",u),console.log("Stats keys:",u?Object.keys(u):"No stats"),console.log("Flash messages:",d.props.flash),s.length>0?(console.log("Goals found but maybe not showing:"),s.forEach((r,t)=>{console.log(`Goal ${t}:`,{id:r.id,title:r.title,status:r.status,user_id:r.user_id})})):console.log("No goals found in props"),(r,t)=>(i(),a(G,null,[v(n(B),{title:"My Goals"}),v(L,null,{default:b(()=>[e("div",F,[e("div",H,[t[5]||(t[5]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"My Goals"),e("p",{class:"mt-2 text-gray-600"},"Track and manage your personal goals")],-1)),e("div",P,[v(n(_),{href:r.route("dashboard"),class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-all duration-200",title:"Go to Dashboard"},{default:b(()=>[...t[1]||(t[1]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),C(" Dashboard ",-1)])]),_:1},8,["href"]),e("button",{onClick:t[0]||(t[0]=o=>n(x).reload({only:["goals","stats"]})),class:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 transition-all duration-200",title:"Refresh goals and stats"},[...t[2]||(t[2]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),C(" Refresh ",-1)])]),e("button",{onClick:w,onMouseenter:f,onMouseleave:k,disabled:l.value,class:"relative overflow-hidden inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"},[l.value||c.value?(i(),a("div",V)):h("",!0),l.value?(i(),a("div",z,[...t[3]||(t[3]=[e("div",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)])])):h("",!0),e("div",A,[(i(),a("svg",{class:y(["w-4 h-4 transition-transform duration-200",{"rotate-90":c.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[4]||(t[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"},null,-1)])],2)),e("span",I,g(l.value?"Loading...":"Create New Goal"),1)]),c.value&&!l.value?(i(),a("div",U)):h("",!0)],40,D)])]),e("div",$,[e("div",O,[e("div",R,[e("div",X,[t[7]||(t[7]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])])],-1)),e("div",q,[e("dl",null,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Goals",-1)),e("dd",Y,g(n(u).total||0),1)])])])])]),e("div",J,[e("div",K,[e("div",Q,[t[9]||(t[9]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",W,[e("dl",null,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Completed",-1)),e("dd",Z,g(n(u).completed||0),1)])])])])]),e("div",ee,[e("div",te,[e("div",se,[t[11]||(t[11]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-yellow-500 rounded-md flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",oe,[e("dl",null,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"In Progress",-1)),e("dd",le,g(n(u).in_progress||0),1)])])])])])]),n(s).length>0?(i(),a("div",ne,[e("ul",re,[(i(!0),a(G,null,N(n(s),o=>(i(),a("li",{key:o.id},[v(n(_),{href:r.route("goals.show",o.hash||o.id),class:"block hover:bg-gray-50 transition-colors duration-150"},{default:b(()=>[e("div",ae,[e("div",ie,[e("div",de,[e("h3",ue,g(o.title),1),e("p",ce,g(o.description),1),e("div",ge,[e("span",null,"Progress: "+g(n(m)(o).completedTasks)+" / "+g(n(m)(o).totalTasks)+" tasks",1),e("div",me,[e("div",{class:"bg-blue-600 h-2 rounded-full",style:T({width:n(m)(o).progressPercentage+"%"})},null,4)])])]),e("div",he,[e("span",{class:y(["inline-flex px-2 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800":n(m)(o).status==="completed","bg-yellow-100 text-yellow-800":n(m)(o).status==="in_progress","bg-gray-100 text-gray-800":n(m)(o).status==="pending"}])},g(n(m)(o).status.charAt(0).toUpperCase()+n(m)(o).status.slice(1).replace("_"," ")),3)])])])]),_:2},1032,["href"])]))),128))])])):(i(),a("div",pe,[t[14]||(t[14]=e("div",{class:"bg-gray-100 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),t[15]||(t[15]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No goals yet",-1)),t[16]||(t[16]=e("p",{class:"text-gray-500 mb-6"},"Get started by creating your first goal.",-1)),e("button",{onClick:w,onMouseenter:f,onMouseleave:k,disabled:l.value,class:"relative overflow-hidden inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300"},[l.value||c.value?(i(),a("div",ve)):h("",!0),l.value?(i(),a("div",xe,[...t[12]||(t[12]=[e("div",{class:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},null,-1)])])):h("",!0),e("div",be,[(i(),a("svg",{class:y(["w-4 h-4 transition-transform duration-200",{"rotate-90":c.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...t[13]||(t[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"},null,-1)])],2)),e("span",ye,g(l.value?"Loading...":"Create Your First Goal"),1)]),c.value&&!l.value?(i(),a("div",ke)):h("",!0)],40,fe)]))])]),_:1})],64))}};export{Me as default};
